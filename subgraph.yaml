specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: ManagerImpl
    network: mainnet
    source:
      address: "0xd310a3041dfcf14def5ccbc508668974b5da7174"
      abi: ManagerImpl
      startBlock: 15799618
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DAO
      abis:
        - name: ManagerImpl
          file: ./abis/ManagerImpl.json
        - name: Token
          file: ./abis/Token.json
        - name: Auction
          file: ./abis/Auction.json
        - name: MetadataRenderer
          file: ./abis/MetadataRenderer.json
        - name: Governor
          file: ./abis/Governor.json
        - name: Treasury
          file: ./abis/Treasury.json
      eventHandlers:
        - event: DAODeployed(address,address,address,address,address)
          handler: handleNewDAO
      file: ./src/manager-impl.ts
templates:
  - kind: ethereum
    name: AuctionContract
    network: mainnet
    source:
      abi: Auction
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AuctionContract
        - Auction
        - AuctionBid
        - Token
      abis:
        - name: Auction
          file: ./abis/Auction.json
      eventHandlers:
        - event: AuctionInitialized(uint256)
          handler: handleAuctionInitialized
        - event: AuctionCreated(uint256,uint256,uint256)
          topic0: "0xd6eddd1118d71820909c1197aa966dbc15ed6f508554252169cc3d5ccac756ca"
          handler: handleAuctionCreated
        - event: AuctionBid(uint256,address,uint256,bool,uint256)
          topic0: "0x1edd36b28569cf1cf930c008c5bcb196ea19525977951413bec3118946951561"
          handler: handleAuctionBid
        - event: AuctionSettled(uint256,address,uint256)
          topic0: "0xc9f72b276a388619c6d185d146697036241880c36654b1a3ffdad07c24038d99"
          handler: handleAuctionSettled
        - event: DurationUpdated(uint256)
          handler: handleDurationUpdated
        - event: MinBidIncrementPercentageUpdated(uint256)
          handler: handleMinBidIncrementPercentageUpdated
        - event: ReservePriceUpdated(uint256)
          handler: handleReservePriceUpdated
        - event: TimeBufferUpdated(uint256)
          handler: handleTimeBufferUpdated
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
        - event: AuctionOwnerUpdated(indexed address,indexed address)
          handler: handleAuctionOwnerUpdated
      file: ./src/auction.ts
  - kind: ethereum
    name: TreasuryContract
    network: mainnet
    source:
      abi: Treasury
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TreasuryContract
        - TreasuryTransaction
      abis:
        - name: Treasury
          file: ./abis/Treasury.json
      eventHandlers:
        - event: TreasuryInitialized(uint256)
          handler: handleTreasuryInitialized
        - event: DelayUpdated(uint256,uint256)
          topic0: "0xa580b4a9812995ffed1b336481c3f3bfeb3414df9f587a9d73856bab25aa4eee"
          handler: handleDelayUpdated
        - event: GracePeriodUpdated(uint256,uint256)
          handler: handleGracePeriodUpdated
        - event: TransactionScheduled(bytes32,uint256)
          topic0: "0x7902f8969f6429dd0244329d34db6ea75cec3a150e8ddbb8945511e2f2c639ea"
          handler: handleTransactionScheduled
        - event: TransactionCanceled(bytes32)
          handler: handleTransactionCanceled
        - event: TransactionExecuted(bytes32,address[],uint256[],bytes[])
          topic0: "0x7e74d8579043af873f575ed17043a48d6beba2668c6b53325bcd8c9a550e5e9c"
          handler: handleTransactionExecuted
        - event: TreasuryOwnerUpdated(indexed address,indexed address)
          topic0: "0x8292fce18fa69edf4db7b94ea2e58241df0ae57f97e0a6c9b29067028bf92d76"
          handler: handleTreasuryOwnerUpdated
      file: ./src/treasury.ts
  - kind: ethereum
    name: GovernorContract
    network: mainnet
    source:
      abi: Governor
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - GovernorContract
        - Vote
        - Proposal
        - Delegation
      abis:
        - name: Governor
          file: ./abis/Governor.json
      eventHandlers:
        - event: GovernorInitialized(uint256)
          handler: handleGovernorInitialized
        - event: ProposalCreated(bytes32,address[],uint256[],bytes[],string,bytes32,(address,uint32,uint32,uint32,uint32,uint32,uint32,uint32,uint32,bool,bool,bool))
          topic0: "0x032b260f9afa08d3ff613d6248a8dce651b8c583a050ca2f9c666a179617b158"
          handler: handleProposalCreated
        - event: ProposalCanceled(bytes32)
          handler: handleProposalCanceled
        - event: ProposalQueued(bytes32,uint256)
          topic0: "0x65431b33ae1566469324739cd3024c5e8d7422fa2c54e71fda14b92fd5e8f1ea"
          handler: handleProposalQueued
        - event: ProposalVetoed(bytes32)
          handler: handleProposalVetoed
        - event: ProposalExecuted(bytes32)
          topic0: "0x7b1bcf1ccf901a11589afff5504d59fd0a53780eed2a952adade0348985139e0"
          handler: handleProposalExecuted
        - event: ProposalThresholdBpsUpdated(uint256,uint256)
          handler: handleProposalThresholdBpsUpdated
        - event: QuorumVotesBpsUpdated(uint256,uint256)
          handler: handleQuorumVotesBpsUpdated
        - event: VetoerUpdated(address,address)
          handler: handleVetoerUpdated
        - event: VoteCast(address,bytes32,uint256,uint256,string)
          topic0: "0x0c165c85edbf8f9b99d51793c9429beb9dc2b608a7f81e64623052f829657af3"
          handler: handleVoteCast
        - event: VotingDelayUpdated(uint256,uint256)
          topic0: "0x16569b50c8812bb18e4b5c46b0fee4a9acbb3a9dca1e1badce427e8d75b5652d"
          handler: handleVotingDelayUpdated
        - event: VotingPeriodUpdated(uint256,uint256)
          topic0: "0xffc708f072ca56e3d45ef0cb288b96cb9378f5f63e1646868bfbc9c38f4263a1"
          handler: handleVotingPeriodUpdated
        - event: GovernorOwnerUpdated(indexed address,indexed address)
          handler: handleGovernorOwnerUpdated
      file: ./src/governor.ts
  - kind: ethereum
    name: TokenContract
    network: mainnet
    source:
      abi: Token
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TokenContract
        - Token
      abis:
        - name: Token
          file: ./abis/Token.json
      eventHandlers:
        - event: TokenInitialized(uint256)
          handler: handleTokenInitialized
        - event: TokenTransfer(indexed address,indexed address,indexed uint256)
          handler: handleTokenTransfer
        - event: DelegateChanged(indexed address,indexed address,indexed address)
          handler: handleDelegateChanged
        - event: DelegateVotesChanged(indexed address,uint256,uint256)
          handler: handleDelegateVotesChanged
        - event: FounderAllocationsCleared((address,uint256,uint256)[])
          handler: handleFounderAllocationsCleared
        - event: MintScheduled(uint256,uint256,(address,uint8,uint32))
          handler: handleMintScheduled
        - event: MintUnscheduled(uint256,uint256,(address,uint8,uint32))
          handler: handleMintUnscheduled
        - event: TokenOwnerUpdated(indexed address,indexed address)
          handler: handleTokenOwnerUpdated
      file: ./src/token.ts
  - kind: ethereum
    name: MetadataContract
    network: mainnet
    source:
      abi: MetadataRenderer
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - MetadataContract
        - Property
      abis:
        - name: MetadataRenderer
          file: ./abis/MetadataRenderer.json
      eventHandlers:
        - event: MetadataRendererInitialized(uint256)
          handler: handleMetadataRendererInitialized
        - event: WebsiteURIUpdated(string,string)
          handler: handleWebsiteURIUpdated
        - event: ContractImageUpdated(string,string)
          handler: handleContractImageUpdated
        - event: DescriptionUpdated(string,string)
          handler: handleDescriptionUpdated
        - event: PropertyAdded(uint256,string)
          handler: handlePropertyAdded
        - event: AdditionalTokenPropertiesSet((string,string,bool)[])
          handler: handleAdditionalTokenPropertiesSet
        - event: RendererBaseUpdated(string,string)
          handler: handleRendererBaseUpdated
      file: ./src/metadata-renderer.ts
